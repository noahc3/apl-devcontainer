version: '3.8'

services:
  apl-dev:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        USER_UID: ${USER_UID:-1000}
        USER_GID: ${USER_GID:-1000}
    container_name: apl-dev-environment
    # Keep container running persistently
    restart: unless-stopped
    # Enable TTY and stdin for interactive shell access
    stdin_open: true
    tty: true
    # Mount your local workspace for development
    volumes:
      # Mount your entire home directory for access to all repositories
      - ${HOME}:/home/host
      # Mount current directory to /host for backwards compatibility
      - .:/host
      # Persist gin configuration and prefixes
      - gin-data:/gin
      # Persist workspace
      - workspace-data:/workspace
    # Set working directory
    working_dir: /workspace
    # Environment variables (customize as needed)
    environment:
      - DISPLAY=${DISPLAY:-:0}
      - GIN_PATH=/gin
    # If you need X11 forwarding for GUI apps
    # volumes:
    #   - /tmp/.X11-unix:/tmp/.X11-unix:rw
    # network_mode: host

volumes:
  gin-data:
    driver: local
  workspace-data:
    driver: local
